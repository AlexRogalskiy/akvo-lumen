{:duct.core/environment                                 :development
 :duct.core/include                                     ["akvo/lumen/config.edn"]

 :akvo.lumen.component.hikaricp/hikaricp       {:uri "jdbc:postgresql://postgres/lumen?user=lumen&password=password&ssl=true"}

 :akvo.lumen.component.http/http               {:port 3000}

 :akvo.lumen.component.tenant-manager {:encryption-key  "secret"}

 :akvo.lumen.component.caddisfly/local                  {:local-schema-uri "./caddisfly/tests-schema.json"}
 :akvo.lumen.component.error-tracker/local              {}
 :akvo.lumen.component.emailer/dev-emailer              {:from-email "devops@akvo.localhost"
                                                         :from-name "Akvo Lumen"}

 :akvo.lumen.component.handler/handler {:middleware
                                        {:functions {:stacktrace #ig/ref :akvo.lumen.component.handler/wrap-stacktrace}
                                         :applied   ^:replace [:not-found :json-response :ring-defaults :json-body
                                                               :wrap-auth :wrap-jwt :monitoring :wrap-label-tenant :stacktrace]}}

 :akvo.lumen.component.keycloak      {:url   "http://auth.lumen.local:8080/auth"
                                      :realm "akvo"
                                      :credentials
                                      {"client_id"     "akvo-lumen-confidential"
                                       "client_secret" "caed3964-09dd-4752-b0bb-22c8e8ffd631"}}

 :akvo.lumen.auth/wrap-jwt                              {:keycloak-url   "http://auth.lumen.local:8080/auth"
                                                         :keycloak-realm "akvo"}

 :akvo.lumen.component.handler/wrap-stacktrace {}

 :akvo.lumen.endpoint.export/export                   {:exporter-api-url "http://exporter:3001"}
 :akvo.lumen.config
 {:config {:file-upload-path "/tmp/akvo/lumen"
           :keycloak-realm "akvo"
           :keycloak-url "http://auth.lumen.local:8080/auth"
           :keycloak-public-client-id "akvo-lumen"
           :flow-api-url "https://api.akvotest.org/flow"
           :invite-redirect {:client-port 3030
                             :scheme :http}
           :sentry-backend-dsn ""
           :sentry-client-dsn ""
           :windshaft-url "http://windshaft:4000"
           :piwik-site-id "165"}}
 }
